# Create clk_wiz
cell xilinx.com:ip:clk_wiz pll_0 {
  PRIMITIVE PLL
  PRIM_IN_FREQ.VALUE_SRC USER
  PRIM_IN_FREQ 125.0
  PRIM_SOURCE Differential_clock_capable_pin
  CLKOUT1_USED true
  CLKOUT1_REQUESTED_OUT_FREQ 125.0
  CLKOUT2_USED true
  CLKOUT2_REQUESTED_OUT_FREQ 250.0
  CLKOUT2_REQUESTED_PHASE 157.5
  CLKOUT3_USED true
  CLKOUT3_REQUESTED_OUT_FREQ 250.0
  CLKOUT3_REQUESTED_PHASE 202.5
  USE_RESET false
} {
  clk_in1_p adc_clk_p_i
  clk_in1_n adc_clk_n_i
}

# Create processing_system7
cell xilinx.com:ip:processing_system7 ps_0 {
  PCW_IMPORT_BOARD_PRESET cfg/red_pitaya.xml
  PCW_USE_S_AXI_ACP 1
  PCW_USE_DEFAULT_ACP_USER_VAL 1
} {
  M_AXI_GP0_ACLK pll_0/clk_out1
  S_AXI_ACP_ACLK pll_0/clk_out1
}

# Create all required interconnections
apply_bd_automation -rule xilinx.com:bd_rule:processing_system7 -config {
  make_external {FIXED_IO, DDR}
  Master Disable
  Slave Disable
} [get_bd_cells ps_0]

# Create xlconstant
cell xilinx.com:ip:xlconstant const_0

# Create proc_sys_reset
cell xilinx.com:ip:proc_sys_reset rst_0 {} {
  ext_reset_in const_0/dout
  dcm_locked pll_0/locked
  slowest_sync_clk pll_0/clk_out1
}

# ADC

# Create axis_red_pitaya_adc
cell pavel-demin:user:axis_red_pitaya_adc adc_0 {
  ADC_DATA_WIDTH 14
} {
  aclk pll_0/clk_out1
  adc_dat_a adc_dat_a_i
  adc_dat_b adc_dat_b_i
  adc_csn adc_csn_o
}

# DAC

# Create axis_red_pitaya_dac
cell pavel-demin:user:axis_red_pitaya_dac dac_0 {
  DAC_DATA_WIDTH 14
} {
  aclk pll_0/clk_out1
  ddr_clk pll_0/clk_out2
  wrt_clk pll_0/clk_out3
  locked pll_0/locked
  dac_clk dac_clk_o
  dac_rst dac_rst_o
  dac_sel dac_sel_o
  dac_wrt dac_wrt_o
  dac_dat dac_dat_o
}

# HUB

# Create axi_hub
cell pavel-demin:user:axi_hub hub_0 {
  CFG_DATA_WIDTH 96
  STS_DATA_WIDTH 64
} {
  S_AXI ps_0/M_AXI_GP0
  aclk pll_0/clk_out1
  aresetn rst_0/peripheral_aresetn
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_0 {
  DIN_WIDTH 96 DIN_FROM 0 DIN_TO 0
} {
  din hub_0/cfg_data
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_1 {
  DIN_WIDTH 96 DIN_FROM 1 DIN_TO 1
} {
  din hub_0/cfg_data
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_2 {
  DIN_WIDTH 96 DIN_FROM 63 DIN_TO 32
} {
  din hub_0/cfg_data
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_3 {
  DIN_WIDTH 96 DIN_FROM 79 DIN_TO 64
} {
  din hub_0/cfg_data
}

# Create port_slicer
cell pavel-demin:user:port_slicer slice_4 {
  DIN_WIDTH 96 DIN_FROM 95 DIN_TO 80
} {
  din hub_0/cfg_data
}

# RX

# Create axis_broadcaster
cell xilinx.com:ip:axis_broadcaster bcast_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 2
  M00_TDATA_REMAP {tdata[15:0]}
  M01_TDATA_REMAP {tdata[31:16]}
} {
  S_AXIS adc_0/M_AXIS
  aclk pll_0/clk_out1
  aresetn slice_0/dout
}

for {set i 0} {$i <= 1} {incr i} {

  # Create axis_variable
  cell pavel-demin:user:axis_variable rate_$i {
    AXIS_TDATA_WIDTH 16
  } {
    cfg_data slice_3/dout
    aclk pll_0/clk_out1
    aresetn slice_0/dout
  }

  # Create cic_compiler
  cell xilinx.com:ip:cic_compiler cic_$i {
    INPUT_DATA_WIDTH.VALUE_SRC USER
    FILTER_TYPE Decimation
    NUMBER_OF_STAGES 6
    SAMPLE_RATE_CHANGES Programmable
    MINIMUM_RATE 8
    MAXIMUM_RATE 8192
    FIXED_OR_INITIAL_RATE 8
    INPUT_SAMPLE_FREQUENCY 125
    CLOCK_FREQUENCY 125
    INPUT_DATA_WIDTH 14
    QUANTIZATION Truncation
    OUTPUT_DATA_WIDTH 16
    USE_XTREME_DSP_SLICE false
    HAS_ARESETN true
  } {
    S_AXIS_DATA bcast_0/M0${i}_AXIS
    S_AXIS_CONFIG rate_$i/M_AXIS
    aclk pll_0/clk_out1
    aresetn slice_0/dout
  }

}

# Create axis_combiner
cell  xilinx.com:ip:axis_combiner comb_0 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 2
  NUM_SI 2
} {
  S00_AXIS cic_0/M_AXIS_DATA
  S01_AXIS cic_1/M_AXIS_DATA
  aclk pll_0/clk_out1
  aresetn slice_0/dout
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter conv_0 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 2
} {
  S_AXIS comb_0/M_AXIS
  aclk pll_0/clk_out1
  aresetn slice_0/dout
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler fir_0 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 16
  COEFFICIENTVECTOR {-2.6021134580e-08, -1.4371593021e-08, 2.3382976322e-08, 9.7212097634e-09, -1.1872426429e-08, 3.7879388619e-09, -1.1110396162e-08, -3.0334717650e-08, 4.8175135672e-08, 7.4998352538e-08, -1.0183705509e-07, -1.4381190061e-07, 1.7434455876e-07, 2.4375197784e-07, -2.6750252920e-07, -3.8269619125e-07, 3.8246864462e-07, 5.6931524920e-07, -5.1955716155e-07, -8.1292217518e-07, 6.7803144598e-07, 1.1232502531e-06, -8.5591442558e-07, -1.5101748364e-06, 1.0498045762e-06, 1.9833466951e-06, -1.2547427528e-06, -2.5517679468e-06, 1.4641028978e-06, 3.2232166259e-06, -1.6697645620e-06, -4.0040363147e-06, 1.8617013848e-06, 4.8980273612e-06, -2.0285669203e-06, -5.9061136088e-06, 2.1577686225e-06, 7.0255965724e-06, -2.2358614836e-06, -8.2495044965e-06, 2.2489930808e-06, 9.5658708601e-06, -2.1835784303e-06, -1.0957143699e-05, 2.0270401149e-06, 1.2399612157e-05, -1.7687262867e-06, -1.3862985324e-05, 1.4008786075e-06, 1.5310006480e-05, -9.1979668602e-07, -1.6696285087e-05, 3.2698420941e-07, 1.7969904724e-05, 3.6853453219e-07, -1.9073408713e-05, -1.1512210259e-06, 1.9941708400e-05, 1.9953642495e-06, -2.0504488769e-05, -2.8646696739e-06, 2.0686892904e-05, 3.7109113544e-06, -2.0410957251e-05, -4.4729780716e-06, 1.9597090972e-05, 5.0758149925e-06, -1.8166151380e-05, -5.4298605049e-06, 1.6041642054e-05, 5.4306744310e-06, -1.3152338716e-05, -4.9591941612e-06, 9.4348582331e-06, 3.8822117750e-06, -4.8365541820e-06, -2.0537290814e-06, -6.8292171379e-07, -6.8703544610e-07, 7.1422643278e-06, 4.5048822311e-06, -1.4544865350e-05, -9.5741467396e-06, 2.2869899523e-05, 1.6071821192e-05, -3.2070994238e-05, -2.4173679537e-05, 4.2073776813e-05, 3.4049107266e-05, -5.2774446387e-05, -4.5855971706e-05, 6.4038234625e-05, 5.9734331601e-05, -7.5698955246e-05, -7.5799910725e-05, 8.7558991758e-05, 9.4136551941e-05, -9.9390864440e-05, -1.1478878294e-04, 1.1093959246e-04, 1.3775321459e-04, -1.2193039013e-04, -1.6298144322e-04, 1.3205442114e-04, 1.9034658852e-04, -1.4100290255e-04, -2.1966102524e-04, 1.4845605949e-04, 2.5065907013e-04, -1.5409563162e-04, -2.8299128880e-04, 1.5761460701e-04, 3.1621832821e-04, -1.5872914694e-04, -3.4980698075e-04, 1.5719042659e-04, 3.8312639714e-04, -1.5279834527e-04, -4.1544628510e-04, 1.4541552590e-04, 4.4593562215e-04, -1.3498339199e-04, -4.7366382808e-04, 1.2153882898e-04, 4.9760179579e-04, -1.0524238238e-04, -5.1665619548e-04, 8.6343992429e-05, 5.2960692290e-04, -6.5276943382e-05, -5.3518569718e-04, 4.2624700457e-05, 5.3205982004e-04, -1.9148135284e-05, -5.1884801242e-04, -4.1984924905e-06, 4.9413594126e-04, 2.6251475405e-05, -4.5649540687e-04, -4.5624769780e-05, 4.0450358202e-04, 6.0697159286e-05, -3.3676475826e-04, -6.9601953317e-05, 2.5193161066e-04, 7.0216154142e-05, -1.4872801391e-04, -6.0149967061e-05, 2.5968306725e-05, 3.6709011018e-05, 1.1734025107e-04, 2.9753172087e-06, -2.8215913826e-04, -6.2157467147e-05, 4.6920835564e-04, 1.4434879312e-04, -6.7901741160e-04, -2.5335254087e-04, 9.1189726375e-04, 3.9327293099e-04, -1.1679180652e-03, -5.6852675368e-04, 1.4468870520e-03, 7.8385631471e-04, -1.7483309860e-03, -1.0443503457e-03, 2.0714795609e-03, 1.3554721097e-03, -2.4152540310e-03, -1.7231025140e-03, 2.7782598982e-03, 2.1536062977e-03, -3.1587914698e-03, -2.6540035280e-03, 3.5545932749e-03, 3.2316756634e-03, -3.9634072828e-03, -3.8951329668e-03, 4.3824090260e-03, 4.6538207408e-03, -4.8084191094e-03, -5.5184897641e-03, 5.2378684204e-03, 6.5015901321e-03, -5.6667605979e-03, -7.6178037431e-03, 6.0906151953e-03, 8.8847777791e-03, -6.5043816899e-03, -1.0324155502e-02, 6.9022994359e-03, 1.1963039785e-02, -7.2776775244e-03, -1.3836116769e-02, 7.6225506206e-03, 1.5988838246e-02, -7.9271282085e-03, -1.8482612326e-02, 8.1776721647e-03, 2.1400359293e-02, -8.3572831078e-03, -2.4861508489e-02, 8.4399414794e-03, 2.9040547766e-02, -8.3851615128e-03, -3.4203806655e-02, 8.1247987132e-03, 4.0778274029e-02, -7.5338941421e-03, -4.9492007238e-02, 6.3589655183e-03, 6.1690106238e-02, -4.0155666364e-03, -8.0143108551e-02, -1.1023809752e-03, 1.1151280898e-01, 1.4737889575e-02, -1.7602189133e-01, -6.8984949358e-02, 3.6021213252e-01, 6.1314809341e-01, 3.6021213252e-01, -6.8984949358e-02, -1.7602189133e-01, 1.4737889575e-02, 1.1151280898e-01, -1.1023809752e-03, -8.0143108551e-02, -4.0155666364e-03, 6.1690106238e-02, 6.3589655183e-03, -4.9492007238e-02, -7.5338941421e-03, 4.0778274029e-02, 8.1247987132e-03, -3.4203806655e-02, -8.3851615128e-03, 2.9040547766e-02, 8.4399414794e-03, -2.4861508489e-02, -8.3572831078e-03, 2.1400359293e-02, 8.1776721647e-03, -1.8482612326e-02, -7.9271282085e-03, 1.5988838246e-02, 7.6225506206e-03, -1.3836116769e-02, -7.2776775244e-03, 1.1963039785e-02, 6.9022994359e-03, -1.0324155502e-02, -6.5043816899e-03, 8.8847777791e-03, 6.0906151953e-03, -7.6178037431e-03, -5.6667605979e-03, 6.5015901321e-03, 5.2378684204e-03, -5.5184897641e-03, -4.8084191094e-03, 4.6538207408e-03, 4.3824090260e-03, -3.8951329668e-03, -3.9634072828e-03, 3.2316756634e-03, 3.5545932749e-03, -2.6540035280e-03, -3.1587914698e-03, 2.1536062977e-03, 2.7782598982e-03, -1.7231025140e-03, -2.4152540310e-03, 1.3554721097e-03, 2.0714795609e-03, -1.0443503457e-03, -1.7483309860e-03, 7.8385631471e-04, 1.4468870520e-03, -5.6852675368e-04, -1.1679180652e-03, 3.9327293099e-04, 9.1189726375e-04, -2.5335254087e-04, -6.7901741160e-04, 1.4434879312e-04, 4.6920835564e-04, -6.2157467147e-05, -2.8215913826e-04, 2.9753172087e-06, 1.1734025107e-04, 3.6709011018e-05, 2.5968306725e-05, -6.0149967061e-05, -1.4872801391e-04, 7.0216154142e-05, 2.5193161066e-04, -6.9601953317e-05, -3.3676475826e-04, 6.0697159286e-05, 4.0450358202e-04, -4.5624769780e-05, -4.5649540687e-04, 2.6251475405e-05, 4.9413594126e-04, -4.1984924905e-06, -5.1884801242e-04, -1.9148135284e-05, 5.3205982004e-04, 4.2624700457e-05, -5.3518569718e-04, -6.5276943382e-05, 5.2960692290e-04, 8.6343992429e-05, -5.1665619548e-04, -1.0524238238e-04, 4.9760179579e-04, 1.2153882898e-04, -4.7366382808e-04, -1.3498339199e-04, 4.4593562215e-04, 1.4541552590e-04, -4.1544628510e-04, -1.5279834527e-04, 3.8312639714e-04, 1.5719042659e-04, -3.4980698075e-04, -1.5872914694e-04, 3.1621832821e-04, 1.5761460701e-04, -2.8299128880e-04, -1.5409563162e-04, 2.5065907013e-04, 1.4845605949e-04, -2.1966102524e-04, -1.4100290255e-04, 1.9034658852e-04, 1.3205442114e-04, -1.6298144322e-04, -1.2193039013e-04, 1.3775321459e-04, 1.1093959246e-04, -1.1478878294e-04, -9.9390864440e-05, 9.4136551941e-05, 8.7558991758e-05, -7.5799910725e-05, -7.5698955246e-05, 5.9734331601e-05, 6.4038234625e-05, -4.5855971706e-05, -5.2774446387e-05, 3.4049107266e-05, 4.2073776813e-05, -2.4173679537e-05, -3.2070994238e-05, 1.6071821192e-05, 2.2869899523e-05, -9.5741467396e-06, -1.4544865350e-05, 4.5048822311e-06, 7.1422643278e-06, -6.8703544610e-07, -6.8292171379e-07, -2.0537290814e-06, -4.8365541820e-06, 3.8822117750e-06, 9.4348582331e-06, -4.9591941612e-06, -1.3152338716e-05, 5.4306744310e-06, 1.6041642054e-05, -5.4298605049e-06, -1.8166151380e-05, 5.0758149925e-06, 1.9597090972e-05, -4.4729780716e-06, -2.0410957251e-05, 3.7109113544e-06, 2.0686892904e-05, -2.8646696739e-06, -2.0504488769e-05, 1.9953642495e-06, 1.9941708400e-05, -1.1512210259e-06, -1.9073408713e-05, 3.6853453219e-07, 1.7969904724e-05, 3.2698420941e-07, -1.6696285087e-05, -9.1979668602e-07, 1.5310006480e-05, 1.4008786075e-06, -1.3862985324e-05, -1.7687262867e-06, 1.2399612157e-05, 2.0270401149e-06, -1.0957143699e-05, -2.1835784303e-06, 9.5658708601e-06, 2.2489930808e-06, -8.2495044965e-06, -2.2358614836e-06, 7.0255965724e-06, 2.1577686225e-06, -5.9061136088e-06, -2.0285669203e-06, 4.8980273612e-06, 1.8617013848e-06, -4.0040363147e-06, -1.6697645620e-06, 3.2232166259e-06, 1.4641028978e-06, -2.5517679468e-06, -1.2547427528e-06, 1.9833466951e-06, 1.0498045762e-06, -1.5101748364e-06, -8.5591442558e-07, 1.1232502531e-06, 6.7803144598e-07, -8.1292217518e-07, -5.1955716155e-07, 5.6931524920e-07, 3.8246864462e-07, -3.8269619125e-07, -2.6750252920e-07, 2.4375197784e-07, 1.7434455876e-07, -1.4381190061e-07, -1.0183705509e-07, 7.4998352538e-08, 4.8175135672e-08, -3.0334717650e-08, -1.1110396162e-08, 3.7879388619e-09, -1.1872426429e-08, 9.7212097634e-09, 2.3382976322e-08, -1.4371593021e-08, -2.6021134580e-08}
  COEFFICIENT_WIDTH 16
  QUANTIZATION Quantize_Only
  BESTPRECISION true
  FILTER_TYPE Decimation
  DECIMATION_RATE 2
  NUMBER_CHANNELS 2
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 15.625
  CLOCK_FREQUENCY 125
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 16
  M_DATA_HAS_TREADY true
  HAS_ARESETN true
} {
  S_AXIS_DATA conv_0/M_AXIS
  aclk pll_0/clk_out1
  aresetn slice_0/dout
}

# Create xlconstant
cell xilinx.com:ip:xlconstant const_1 {
  CONST_WIDTH 16
  CONST_VAL 65535
}

# Create axis_ram_writer
cell pavel-demin:user:axis_ram_writer writer_0 {
  ADDR_WIDTH 16
  AXI_ID_WIDTH 3
  AXIS_TDATA_WIDTH 16
  FIFO_WRITE_DEPTH 2048
} {
  S_AXIS fir_0/M_AXIS_DATA
  M_AXI ps_0/S_AXI_ACP
  min_addr slice_2/dout
  cfg_data const_1/dout
  aclk pll_0/clk_out1
  aresetn slice_1/dout
}

# TX

# Create axis_fifo
cell pavel-demin:user:axis_fifo fifo_0 {
  S_AXIS_TDATA_WIDTH 32
  M_AXIS_TDATA_WIDTH 32
  WRITE_DEPTH 32768
} {
  S_AXIS hub_0/M00_AXIS
  aclk pll_0/clk_out1
  aresetn rst_0/peripheral_aresetn
}

# Create axis_zeroer
cell pavel-demin:user:axis_zeroer zeroer_0 {
  AXIS_TDATA_WIDTH 32
} {
  S_AXIS fifo_0/M_AXIS
  aclk pll_0/clk_out1
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter conv_2 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 2
} {
  S_AXIS zeroer_0/M_AXIS
  aclk pll_0/clk_out1
  aresetn rst_0/peripheral_aresetn
}

# Create fir_compiler
cell xilinx.com:ip:fir_compiler fir_1 {
  DATA_WIDTH.VALUE_SRC USER
  DATA_WIDTH 14
  COEFFICIENTVECTOR {-1.6436084501e-08, -4.6886269341e-08, -6.0448666913e-10, 3.0655537993e-08, 1.8177701338e-08, 3.2431498400e-08, -5.8262514347e-09, -1.5084308482e-07, -8.2895796792e-08, 3.1155640781e-07, 3.0371226691e-07, -4.6960940237e-07, -7.0821329704e-07, 5.4185157412e-07, 1.3241154897e-06, -4.0946326379e-07, -2.1330680525e-06, -6.8694811492e-08, 3.0501029519e-06, 1.0301308083e-06, -3.9115112348e-06, -2.5722128588e-06, 4.4775358362e-06, 4.7102327729e-06, -4.4550563057e-06, -7.3386136885e-06, 3.5420738458e-06, 1.0205926688e-05, -1.4911844662e-06, -1.2914842157e-05, -1.8165305210e-06, 1.4955723312e-05, 6.3009743948e-06, -1.5777661755e-05, -1.1633714627e-05, 1.4892428540e-05, 1.7226430175e-05, -1.2002753772e-05, -2.2279958122e-05, 7.1224231640e-06, 2.5888413825e-05, -6.7394611940e-07, -2.7207406616e-05, -6.4769602241e-06, 2.5661443280e-05, 1.3073033760e-05, -2.1159824892e-05, -1.7620162943e-05, 1.4276487829e-05, 1.8643480366e-05, -6.3448123764e-06, -1.5022318306e-05, -5.7894544142e-07, 6.3576674724e-06, 3.9151736093e-06, 6.6931635928e-06, -9.3153186966e-07, -2.2192529367e-05, -1.0740798132e-05, 3.6881876571e-05, 3.2493905094e-05, -4.6411111980e-05, -6.4172235115e-05, 4.5799542926e-05, 1.0357844904e-04, -3.0198341198e-05, -1.4626008522e-04, -4.1811411779e-06, 1.8564172645e-04, 5.9074417757e-05, -2.1358133100e-04, -1.3327817299e-04, 2.2135482537e-04, 2.2205984524e-04, -2.0099837643e-04, -3.1704473951e-04, 1.4685247316e-04, 4.0671687528e-04, -5.7080920747e-05, -4.7759395965e-04, -6.5113601228e-05, 5.1602835146e-04, 2.1086264240e-04, -5.1048024140e-04, -3.6589488723e-04, 4.5385958831e-04, 5.1164742037e-04, -3.4584742171e-04, -6.2761511086e-04, 1.9437028836e-04, 6.9442856818e-04, -1.6094425442e-05, -6.9752473144e-04, -1.6450224594e-04, 6.3086811692e-04, 3.1763954728e-04, -5.0011361138e-04, -4.1228187817e-04, 3.2455175016e-04, 4.2141592871e-04, -1.3723462061e-04, -3.2799750129e-04, -1.7168716354e-05, 1.3077660982e-04, 8.6980333499e-05, 1.5093595124e-04, -2.0454551804e-05, -4.7458948996e-04, -2.2565876020e-04, 7.7420502465e-04, 6.7597501219e-04, -9.6450461069e-04, -1.3274244124e-03, 9.4800096338e-04, 2.1411424520e-03, -6.2602561560e-04, -3.0374659283e-03, -8.7454136117e-05, 3.8950458382e-03, 1.2503441706e-03, -4.5549454575e-03, -2.8767956292e-03, 4.8300806458e-03, 4.9231703935e-03, -4.5197558102e-03, -7.2773088400e-03, 3.4283923321e-03, 9.7525036551e-03, -1.3869458999e-03, -1.2086969677e-02, -1.7249448324e-03, 1.3948422789e-02, 5.9571009457e-03, -1.4945051481e-02, -1.1273829513e-02, 1.4633150167e-02, 1.7538781950e-02, -1.2524973782e-02, -2.4508094061e-02, 8.0801380076e-03, 3.1824475644e-02, -6.6383036058e-04, -3.9004003350e-02, -1.0570544425e-02, 4.5388020146e-02, 2.6980846294e-02, -4.9970058275e-02, -5.1236693858e-02, 5.0737631742e-02, 8.9787173448e-02, -4.1589200753e-02, -1.6254208995e-01, -9.8522292010e-03, 3.5564436029e-01, 5.5306276319e-01, 3.5564436029e-01, -9.8522292010e-03, -1.6254208995e-01, -4.1589200753e-02, 8.9787173448e-02, 5.0737631742e-02, -5.1236693858e-02, -4.9970058275e-02, 2.6980846294e-02, 4.5388020146e-02, -1.0570544425e-02, -3.9004003350e-02, -6.6383036058e-04, 3.1824475644e-02, 8.0801380076e-03, -2.4508094061e-02, -1.2524973782e-02, 1.7538781950e-02, 1.4633150167e-02, -1.1273829513e-02, -1.4945051481e-02, 5.9571009457e-03, 1.3948422789e-02, -1.7249448324e-03, -1.2086969677e-02, -1.3869458999e-03, 9.7525036551e-03, 3.4283923321e-03, -7.2773088400e-03, -4.5197558102e-03, 4.9231703935e-03, 4.8300806458e-03, -2.8767956292e-03, -4.5549454575e-03, 1.2503441706e-03, 3.8950458382e-03, -8.7454136117e-05, -3.0374659283e-03, -6.2602561560e-04, 2.1411424520e-03, 9.4800096338e-04, -1.3274244124e-03, -9.6450461069e-04, 6.7597501219e-04, 7.7420502465e-04, -2.2565876020e-04, -4.7458948996e-04, -2.0454551804e-05, 1.5093595124e-04, 8.6980333499e-05, 1.3077660982e-04, -1.7168716354e-05, -3.2799750129e-04, -1.3723462061e-04, 4.2141592871e-04, 3.2455175016e-04, -4.1228187817e-04, -5.0011361138e-04, 3.1763954728e-04, 6.3086811692e-04, -1.6450224594e-04, -6.9752473144e-04, -1.6094425442e-05, 6.9442856818e-04, 1.9437028836e-04, -6.2761511086e-04, -3.4584742171e-04, 5.1164742037e-04, 4.5385958831e-04, -3.6589488723e-04, -5.1048024140e-04, 2.1086264240e-04, 5.1602835146e-04, -6.5113601228e-05, -4.7759395965e-04, -5.7080920747e-05, 4.0671687528e-04, 1.4685247316e-04, -3.1704473951e-04, -2.0099837643e-04, 2.2205984524e-04, 2.2135482537e-04, -1.3327817299e-04, -2.1358133100e-04, 5.9074417757e-05, 1.8564172645e-04, -4.1811411779e-06, -1.4626008522e-04, -3.0198341198e-05, 1.0357844904e-04, 4.5799542926e-05, -6.4172235115e-05, -4.6411111980e-05, 3.2493905094e-05, 3.6881876571e-05, -1.0740798132e-05, -2.2192529367e-05, -9.3153186966e-07, 6.6931635928e-06, 3.9151736093e-06, 6.3576674724e-06, -5.7894544142e-07, -1.5022318306e-05, -6.3448123764e-06, 1.8643480366e-05, 1.4276487829e-05, -1.7620162943e-05, -2.1159824892e-05, 1.3073033760e-05, 2.5661443280e-05, -6.4769602241e-06, -2.7207406616e-05, -6.7394611940e-07, 2.5888413825e-05, 7.1224231640e-06, -2.2279958122e-05, -1.2002753772e-05, 1.7226430175e-05, 1.4892428540e-05, -1.1633714627e-05, -1.5777661755e-05, 6.3009743948e-06, 1.4955723312e-05, -1.8165305210e-06, -1.2914842157e-05, -1.4911844662e-06, 1.0205926688e-05, 3.5420738458e-06, -7.3386136885e-06, -4.4550563057e-06, 4.7102327729e-06, 4.4775358362e-06, -2.5722128588e-06, -3.9115112348e-06, 1.0301308083e-06, 3.0501029519e-06, -6.8694811492e-08, -2.1330680525e-06, -4.0946326379e-07, 1.3241154897e-06, 5.4185157412e-07, -7.0821329704e-07, -4.6960940237e-07, 3.0371226691e-07, 3.1155640781e-07, -8.2895796792e-08, -1.5084308482e-07, -5.8262514347e-09, 3.2431498400e-08, 1.8177701338e-08, 3.0655537993e-08, -6.0448666913e-10, -4.6886269341e-08, -1.6436084501e-08}
  COEFFICIENT_WIDTH 16
  QUANTIZATION Quantize_Only
  BESTPRECISION true
  FILTER_TYPE Interpolation
  INTERPOLATION_RATE 2
  NUMBER_CHANNELS 2
  NUMBER_PATHS 1
  SAMPLE_FREQUENCY 7.8125
  CLOCK_FREQUENCY 125
  OUTPUT_ROUNDING_MODE Convergent_Rounding_to_Even
  OUTPUT_WIDTH 16
  M_DATA_HAS_TREADY true
  HAS_ARESETN true
} {
  S_AXIS_DATA conv_2/M_AXIS
  aclk pll_0/clk_out1
  aresetn rst_0/peripheral_aresetn
}

# Create axis_dwidth_converter
cell xilinx.com:ip:axis_dwidth_converter conv_3 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 2
  M_TDATA_NUM_BYTES 4
} {
  S_AXIS fir_1/M_AXIS_DATA
  aclk pll_0/clk_out1
  aresetn rst_0/peripheral_aresetn
}

# Create axis_broadcaster
cell xilinx.com:ip:axis_broadcaster bcast_1 {
  S_TDATA_NUM_BYTES.VALUE_SRC USER
  M_TDATA_NUM_BYTES.VALUE_SRC USER
  S_TDATA_NUM_BYTES 4
  M_TDATA_NUM_BYTES 2
  M00_TDATA_REMAP {tdata[15:0]}
  M01_TDATA_REMAP {tdata[31:16]}
} {
  S_AXIS conv_3/M_AXIS
  aclk pll_0/clk_out1
  aresetn rst_0/peripheral_aresetn
}

for {set i 0} {$i <= 1} {incr i} {

  # Create axis_variable
  cell pavel-demin:user:axis_variable rate_[expr $i + 2] {
    AXIS_TDATA_WIDTH 16
  } {
    cfg_data slice_4/dout
    aclk pll_0/clk_out1
    aresetn rst_0/peripheral_aresetn
  }

  # Create cic_compiler
  cell xilinx.com:ip:cic_compiler cic_[expr $i + 2] {
    INPUT_DATA_WIDTH.VALUE_SRC USER
    FILTER_TYPE Interpolation
    NUMBER_OF_STAGES 6
    SAMPLE_RATE_CHANGES Programmable
    MINIMUM_RATE 8
    MAXIMUM_RATE 8192
    FIXED_OR_INITIAL_RATE 8
    INPUT_SAMPLE_FREQUENCY 15.625
    CLOCK_FREQUENCY 125
    INPUT_DATA_WIDTH 14
    QUANTIZATION Truncation
    OUTPUT_DATA_WIDTH 14
    USE_XTREME_DSP_SLICE false
    HAS_ARESETN true
  } {
    S_AXIS_DATA bcast_1/M0${i}_AXIS
    S_AXIS_CONFIG rate_[expr $i + 2]/M_AXIS
    aclk pll_0/clk_out1
    aresetn rst_0/peripheral_aresetn
  }

}

# Create axis_combiner
cell  xilinx.com:ip:axis_combiner comb_1 {
  TDATA_NUM_BYTES.VALUE_SRC USER
  TDATA_NUM_BYTES 2
} {
  S00_AXIS cic_2/M_AXIS_DATA
  S01_AXIS cic_3/M_AXIS_DATA
  M_AXIS dac_0/S_AXIS
  aclk pll_0/clk_out1
  aresetn rst_0/peripheral_aresetn
}

# STS

# Create xlconcat
cell xilinx.com:ip:xlconcat concat_0 {
  NUM_PORTS 2
  IN0_WIDTH 32
  IN1_WIDTH 16
} {
  In0 writer_0/sts_data
  In1 fifo_0/write_count
  dout hub_0/sts_data
}
